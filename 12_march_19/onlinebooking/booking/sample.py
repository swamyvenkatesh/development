sss = '<Journey JourneyDuration="PT5H9M" IsSubComponent="false"><OriginLocation LocationCode="7000372" Name="Chichester" Country="GB"/><DestinationLocation LocationCode="7023060" Name="Delamere" Country="GB"/><JourneySegments><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T08:09:00" ArrivalDateTime="2019-04-30T09:40:00" TrainNumber="0809" JourneyDuration="PT1H31M" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000372" Name="Chichester" Country="GB"/><ArrivalStation LocationCode="7000246" Name="London Victoria" Country="GB"/><RailAmenities><RailAmenity Name="SN"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T09:40:00" ArrivalDateTime="2019-04-30T10:40:00" TrainNumber="0940" JourneyDuration="PT1H" TrainServiceType="Tube" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000246" Name="London Victoria" Country="GB"/><ArrivalStation LocationCode="7000021" Name="London Euston" Country="GB"/><RailAmenities><RailAmenity Name="Tube segment"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T10:40:00" ArrivalDateTime="2019-04-30T12:10:00" TrainNumber="1040" JourneyDuration="PT1H30M" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000021" Name="London Euston" Country="GB"/><ArrivalStation LocationCode="7000096" Name="Crewe" Country="GB"/><RailAmenities><RailAmenity Name="VT"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T12:23:00" ArrivalDateTime="2019-04-30T12:46:00" TrainNumber="1223" JourneyDuration="PT23M" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000096" Name="Crewe" Country="GB"/><ArrivalStation LocationCode="7000168" Name="Chester" Country="GB"/><RailAmenities><RailAmenity Name="AW"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T13:02:00" ArrivalDateTime="2019-04-30T13:18:00" TrainNumber="1302" JourneyDuration="PT16M" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000168" Name="Chester" Country="GB"/><ArrivalStation LocationCode="7023060" Name="Delamere" Country="GB"/><RailAmenities><RailAmenity Name="NT"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment></JourneySegments></Journey><Journey JourneyDuration="PT5H43M" IsSubComponent="false"><OriginLocation LocationCode="7000372" Name="Chichester" Country="GB"/><DestinationLocation LocationCode="7023060" Name="Delamere" Country="GB"/><JourneySegments><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T08:09:00" ArrivalDateTime="2019-04-30T09:40:00" TrainNumber="0809" JourneyDuration="PT1H31M" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000372" Name="Chichester" Country="GB"/><ArrivalStation LocationCode="7000246" Name="London Victoria" Country="GB"/><RailAmenities><RailAmenity Name="SN"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T09:40:00" ArrivalDateTime="2019-04-30T10:20:00" TrainNumber="0940" JourneyDuration="PT40M" TrainServiceType="Tube" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000246" Name="London Victoria" Country="GB"/><ArrivalStation LocationCode="7000021" Name="London Euston" Country="GB"/><RailAmenities><RailAmenity Name="Tube segment"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T10:20:00" ArrivalDateTime="2019-04-30T12:16:00" TrainNumber="1020" JourneyDuration="PT1H56M" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000021" Name="London Euston" Country="GB"/><ArrivalStation LocationCode="7000187" Name="Stockport" Country="GB"/><RailAmenities><RailAmenity Name="VT"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T12:52:00" ArrivalDateTime="2019-04-30T13:52:00" TrainNumber="1252" JourneyDuration="PT1H" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000187" Name="Stockport" Country="GB"/><ArrivalStation LocationCode="7023060" Name="Delamere" Country="GB"/><RailAmenities><RailAmenity Name="NT"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment></JourneySegments></Journey><Journey JourneyDuration="PT5H39M" IsSubComponent="false"><OriginLocation LocationCode="7000372" Name="Chichester" Country="GB"/><DestinationLocation LocationCode="7023060" Name="Delamere" Country="GB"/><JourneySegments><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T08:39:00" ArrivalDateTime="2019-04-30T10:11:00" TrainNumber="0839" JourneyDuration="PT1H32M" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000372" Name="Chichester" Country="GB"/><ArrivalStation LocationCode="7000246" Name="London Victoria" Country="GB"/><RailAmenities><RailAmenity Name="SN"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T10:11:00" ArrivalDateTime="2019-04-30T11:10:00" TrainNumber="1011" JourneyDuration="PT59M" TrainServiceType="Tube" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000246" Name="London Victoria" Country="GB"/><ArrivalStation LocationCode="7000021" Name="London Euston" Country="GB"/><RailAmenities><RailAmenity Name="Tube segment"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T11:10:00" ArrivalDateTime="2019-04-30T13:11:00" TrainNumber="1110" JourneyDuration="PT2H1M" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000021" Name="London Euston" Country="GB"/><ArrivalStation LocationCode="7000168" Name="Chester" Country="GB"/><RailAmenities><RailAmenity Name="VT"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T14:02:00" ArrivalDateTime="2019-04-30T14:18:00" TrainNumber="1402" JourneyDuration="PT16M" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000168" Name="Chester" Country="GB"/><ArrivalStation LocationCode="7023060" Name="Delamere" Country="GB"/><RailAmenities><RailAmenity Name="NT"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment></JourneySegments></Journey><Journey JourneyDuration="PT6H45M" IsSubComponent="false"><OriginLocation LocationCode="7000372" Name="Chichester" Country="GB"/><DestinationLocation LocationCode="7023060" Name="Delamere" Country="GB"/><JourneySegments><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T09:07:00" ArrivalDateTime="2019-04-30T10:05:00" TrainNumber="0907" JourneyDuration="PT58M" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000372" Name="Chichester" Country="GB"/><ArrivalStation LocationCode="7000087" Name="Southampton" Country="GB"/><RailAmenities><RailAmenity Name="SN"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T10:17:00" ArrivalDateTime="2019-04-30T14:13:00" TrainNumber="1017" JourneyDuration="PT3H56M" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000087" Name="Southampton" Country="GB"/><ArrivalStation LocationCode="7000187" Name="Stockport" Country="GB"/><RailAmenities><RailAmenity Name="XC"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T14:52:00" ArrivalDateTime="2019-04-30T15:52:00" TrainNumber="1452" JourneyDuration="PT1H" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000187" Name="Stockport" Country="GB"/><ArrivalStation LocationCode="7023060" Name="Delamere" Country="GB"/><RailAmenities><RailAmenity Name="NT"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment></JourneySegments><FareRPHs><FareRPH>1</FareRPH><FareRPH>2</FareRPH><FareRPH>3</FareRPH><FareRPH>4</FareRPH><FareRPH>5</FareRPH><FareRPH>6</FareRPH><FareRPH>7</FareRPH></FareRPHs></Journey><Journey JourneyDuration="PT5H9M" IsSubComponent="false"><OriginLocation LocationCode="7000372" Name="Chichester" Country="GB"/><DestinationLocation LocationCode="7023060" Name="Delamere" Country="GB"/><JourneySegments><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T09:09:00" ArrivalDateTime="2019-04-30T10:41:00" TrainNumber="0909" JourneyDuration="PT1H32M" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000372" Name="Chichester" Country="GB"/><ArrivalStation LocationCode="7000246" Name="London Victoria" Country="GB"/><RailAmenities><RailAmenity Name="SN"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T10:41:00" ArrivalDateTime="2019-04-30T11:40:00" TrainNumber="1041" JourneyDuration="PT59M" TrainServiceType="Tube" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000246" Name="London Victoria" Country="GB"/><ArrivalStation LocationCode="7000021" Name="London Euston" Country="GB"/><RailAmenities><RailAmenity Name="Tube segment"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T11:40:00" ArrivalDateTime="2019-04-30T13:11:00" TrainNumber="1140" JourneyDuration="PT1H31M" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000021" Name="London Euston" Country="GB"/><ArrivalStation LocationCode="7000096" Name="Crewe" Country="GB"/><RailAmenities><RailAmenity Name="VT"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T13:23:00" ArrivalDateTime="2019-04-30T13:46:00" TrainNumber="1323" JourneyDuration="PT23M" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000096" Name="Crewe" Country="GB"/><ArrivalStation LocationCode="7000168" Name="Chester" Country="GB"/><RailAmenities><RailAmenity Name="AW"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment><JourneySegment><TrainSegment DepartureDateTime="2019-04-30T14:02:00" ArrivalDateTime="2019-04-30T14:18:00" TrainNumber="1402" JourneyDuration="PT16M" TrainServiceType="Train" CrossBorder="false" OperatorName="ATOC"><DepartureStation LocationCode="7000168" Name="Chester" Country="GB"/><ArrivalStation LocationCode="7023060" Name="Delamere" Country="GB"/><RailAmenities><RailAmenity Name="NT"/></RailAmenities><ClassCodes/></TrainSegment></JourneySegment></JourneySegments></Journey>'

s1= sss.split("</Journey>")
# # print s1
# print len(s1)

train_no = '1452'
# TrainNumber="0940" 
train_num = 'TrainNumber="{0}"'.format(str(train_no))
print train_num
sst = ''
for i in s1:
	dd = i.split("<JourneySegment>")
	for j in dd:
		if j.__contains__(train_num):
			print "hello"
			sst += str(dd[0])
			sst +="<JourneySegment>"
			sst += j

if sst.__contains__('<FareRPHs>'):
	sst = sst.split("<FareRPHs>")
	sst = sst[0]
sst+='</Journey>'
print sst


# xml_data += '<Passengers>
# <Passenger IsLeader="false" 
# YearOfBirth="Year" MonthOfBirth="Month" DayOfBirth="Day" 
# PassportNumber="" PlaceOfBirthCountry="US" 
# PlaceOfBirthCity="Pointe-Claire" Nationality="US" 
# CountryResidence="CA" Age="-1" Surname="salort" 
# GivenName="fred" NamePrefix="Mr" ID="1"/></Passengers>'


# def checking_api(request):    

#     xml ="""

#     <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
# <ACP_RailBookRQ xmlns="http://www.acprailinternational.com/API/R2">
#     <POS>
#         <RequestorID>RTG-XML</RequestorID>
#     </POS>
#     <RailBookInfo ContactEmail="" POSReference="">
#         <SelectedOptions>
#             <SelectedOption TicketOption="Etk" IsCreditSale="true" ID="1">
#                 <ODFare PlaceOfBirthRequired="false" NationalityRequired="false" CntryResidenceRequired="false" EmailRequired="false" PaxNameRequested="true" DateOfBirthRequired="false" PassportRequired="false" TicketOption="Etk" BookingOnRequest="false" PricingOnRequest="false" PaxUnits="1" TravelDate="2019-03-20" UseByTL="2018-12-19" UseAfterTL="2018-12-20" Magic="59C6C1B9790F61A6F5E651F8CC993F9E789C6D50CB6EC23010BCFB2B523807F949ECDCFC8AD443AB56A12794432056952AC488988A0AF1EF35A1AD00D5DA8335BBB3333BD3A55F7DB87578489660E7B65DEA1BBF0DADEF873C5956A06E9A3BA4DC766D485F76EDDAE5C9F48ABDF0A1EEFEC18B7A171124E80C8245A9F304C68FDCF87D1F7E61ED379B7618A2469E8859069EDDB9C5E98C80D2ED3EE3CAC2B90BB1AAC04B7D302ED46D77AB537671EED14462DCD7C4F189348B09A8DF473FBDEF5D055EF7751FDAF0751E7AEBDBF063F7CEDC78C9B8EED666595C746310C7E911645C6846B8D596165A52490DB60C31CAB99D43A98D565867485B5C60AB10C30412AA88A1845808B1424018AAB8E29268AE0A220C2352232AA8D1C2402C629363AAA08232C304472945A1C0D222A645748400869651A899420A41C8E7994299CC22657CE074024FEDE1CFF332451548D77E381F3417F1A074550F57E9A4CD6AE82E81DCE48ED925F8B1BE0100499C4C31020000" FareType="Regular" RouteDescription="ANY PERMITTED - Travel is allowed via any permitted route." ProductName="TICKET on DEPARTURE &amp; RESERVATION -ANYTIME via:ANY PERMITTED - Travel is allowed via any permitted route." ReservationRequired="true" IncludesProtectionPlan="false" ItineraryType="One-Way-Outbound" CurrencyCode="GBP" TicketCount="1" TicketingTimeLimit="2019-03-19T23:59:59.0Z" IsEstimated="false" Class="Standard" FareReference="2">
#                     <PassengerTypePrices>
#                         <PassengerMixSlice SFDetails="#{'789C538ECE4FCA4A4D2E515488E60ACDCB2C71CE2F2EB1523034B3D433E002B19D4B8B8A3C8BF39D53AC1494DC9D0294B8824B0B0A7232538B4092AE15C9194120E540C5B1B100867B17A74B000000'}" TotalSliceAmount="194.00" TSC="0.00" UnitPrice="194.00" Quantity="1" Code="ADT" SliceID="1">
#                             <MixDetails>
#                                 <PassengerPlaceholder Age="-1"/>
#                             </MixDetails>
#                         </PassengerMixSlice>
#                     </PassengerTypePrices>
#                     <TotalPrice ServiceFee="25.0" Net="184.30" Commission="9.70" Amount="194.00" TSC="0.00" Fare="194.00"/>
#                     <OriginLocation Country="GB" Name="London Euston" LocationCode="7000021"/>
#                     <DestinationLocation Country="GB" Name="Manchester Piccadilly" LocationCode="7000046"/>
#                     <SubComponents/>
#                     <IntegratedTotalPrice ServiceFee="25.0" Net="184.30" Commission="9.70" Amount="194.00" TSC="0.00" Fare="194.00"/>
#                     <IntegratedPassengerTypePrices>
#                         <PassengerMixSlice SFDetails="#{'789C538ECE4FCA4A4D2E515488E60ACDCB2C71CE2F2EB1523034B3D433E002B19D4B8B8A3C8BF39D53AC1494DC9D0294B8824B0B0A7232538B4092AE15C9194120E540C5B1B100867B17A74B000000'}" TotalSliceAmount="194.00" TSC="0.00" UnitPrice="194.00" Quantity="1" Code="ADT" SliceID="1">
#                             <MixDetails>
#                                 <PassengerPlaceholder Age="-1"/>
#                             </MixDetails>
#                         </PassengerMixSlice>
#                     </IntegratedPassengerTypePrices>
#                     <PossiblePlacePrefs>
#                         <PossibleSpecialRequests>
#                             <SpecialRequest>Unspecified</SpecialRequest>
#                         </PossibleSpecialRequests>
#                         <PossibleCompartmentTypes>
#                             <CompartmentType>Unspecified</CompartmentType>
#                         </PossibleCompartmentTypes>
#                         <PossiblePositions>
#                             <Position>Unspecified</Position>
#                         </PossiblePositions>
#                     </PossiblePlacePrefs>
#                     <ProdMarketingName>&lt;div id="DisplayName"&gt;TICKET on DEPARTURE &amp; RESERVATION -ANYTIME&lt;/div&gt;</ProdMarketingName>
#                     <SalesConditions RefundPolicy="Non-Refundable">
#                         <TermsAndConditions MustAcknowledge="true" URL="http://www.acprail.com/railways-terms-and-conditions/TTL-tod-ow-withres-anytime.html"/>
#                         <RefundRules>
#                             <RefundRule MinimumPenalty="0.0" PenaltyRate="100.0" WithinDateBasis="P0D" DateBasis="Issue" Sequence="1"/>
#                         </RefundRules>
#                     </SalesConditions>
#                 </ODFare>
#                 <OriginDestinationOption>
#                     <Journey IsSubComponent="false" JourneyDuration="PT2H5M">
#                         <OriginLocation Country="GB" Name="London Euston" CodeContext="UIC" LocationCode="7000021"/>
#                         <DestinationLocation Country="GB" Name="Manchester Piccadilly" CodeContext="UIC" LocationCode="7000046"/>
#                         <JourneySegments>
#                             <JourneySegment>
#                                 <TrainSegment OperatorName="ATOC" ReservationMode="Optional" CrossBorder="false" TrainServiceType="Train" JourneyDuration="PT2H5M" TrainNumber="0800" ArrivalDateTime="2019-03-21T10:05:00" DepartureDateTime="2019-03-20T08:00:00">
#                                     <DepartureStation Country="GB" Name="London Euston" CodeContext="UIC" LocationCode="7000021"/>
#                                     <ArrivalStation Country="GB" Name="Manchester Piccadilly" CodeContext="UIC" LocationCode="7000046"/>
#                                     <RailAmenities>
#                                         <RailAmenity Name="VT"/>
#                                     </RailAmenities>
#                                     <ClassCodes/>
#                                 </TrainSegment>
#                             </JourneySegment>
#                         </JourneySegments>
#                         <FareRPHs>
#                             <FareRPH>1</FareRPH>
#                             <FareRPH>2</FareRPH>
#                         </FareRPHs>
#                     </Journey>
#                     <PlacePrefs Position="Unspecified" CompartmentType="Unspecified" SpecialRequest="Unspecified"/>
#                 </OriginDestinationOption>
#                 <PassengerIndex>
#                     <Passenger SliceID="1" PassengerID="1"/>
#                 </PassengerIndex>
#                 <PaymentIndex/>
#                 <CountryLists/>
#             </SelectedOption>
#         </SelectedOptions>
#         <Payments/>
#         <Passengers>
#             <Passenger IsLeader="false" YearOfBirth="Year" MonthOfBirth="Month" DayOfBirth="Day" PassportNumber="" PlaceOfBirthCountry="CA" PlaceOfBirthCity="" Nationality="CA" CountryResidence="CA" Age="-1" Surname="1qdqwd" GivenName="Passengersadasd" NamePrefix="Mr" ID="1"/>
#         </Passengers>
#         <Remarks/>
#     </RailBookInfo>
# </ACP_RailBookRQ>

#     """

#     serURL = 'URL: https://ws.test.acprailinternational.com/method=ACP_RailBook'

#     headers = {'content-type': 'application/xml; charset=utf-8'}
    
#     Result = requests.post(serURL, data=xml, headers=headers)
#     print Result,"++++++"
#     if Result.status_code == 200:
#         response = Result.text
#         print response
#         return HttpResponse(response)
#     else:
#         print "Status code error", Result.status_code  

#         return HttpResponse(Result.status_code )
  
